<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SHADES - Admin Recent activities</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <script defer src="/script/admin.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              'shades-black': '#111111',
              'shades-gray': '#F5F5F7',
            },
          },
        },
      };
    </script>
  </head>

  <body class="bg-shades-black">
    <%- include('../../views/partials/admin/header') %>
    <!-- Main Content -->
    <main class="flex-1 md:ml-64 transition-all duration-300">
      <!-- Top Header -->
      <header class="sticky top-0 z-40 bg-shades-black shadow-sm">
        <div class="flex justify-between items-center px-4 sm:px-6 py-4">
          <button id="mobile-menu-toggle" class="md:hidden text-gray-800 focus:outline-none">
            <i class="fas fa-bars text-xl"></i>
          </button>
          <h1 class="text-white font-medium">Admin Dashboard</h1>
        </div>
      </header>
      <div class="p-6">
        <!-- Header Section -->
        <div class="bg-black rounded-lg shadow-sm p-6 mb-6">
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              
              <h1 class="text-lg font-semibold text-white">Recent Activities</h1>
            </div>
            <a
                href="/admin/dashboard"
                class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-200 bg-gray-800 rounded-lg hover:bg-gray-900 transition ease-in w-full sm:w-auto text-center"
              >
                <i class="fas fa-arrow-left mr-2"></i>
                Back to dashboard
              </a>
          </div>
          
        </div>

        <!-- Activity List Section -->
        <div class="bg-black rounded-lg shadow-sm overflow-hidden mb-6">
          <div id="activityContainer" class="p-6">
            <div class="space-y-4">
              <% recentActivities.forEach(activity=> { %>
              <% if (activity.type==='user' ) { %>
              <div class="flex items-start">
                <div class="flex-shrink-0 mr-3">
                  <div class="h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center">
                    <i class="fas fa-user-plus text-blue-500 text-sm"></i>
                  </div>
                </div>
                <div>
                  <p class="text-sm font-medium text-gray-200">
                    New customer <%= activity.name %> registered
                  </p>
                  <p class="text-xs text-gray-500">
                    <%= new Date(activity.time).toLocaleDateString('en-GB') %>
                  </p>
                </div>
              </div>
              <% } else if (activity.type==='order' ) { %>
              <div class="flex items-start">
                <div class="flex-shrink-0 mr-3">
                  <div class="h-8 w-8 rounded-full bg-green-100 flex items-center justify-center">
                    <i class="fas fa-dollar-sign text-green-500 text-sm"></i>
                  </div>
                </div>
                <div>
                  <p class="text-sm font-medium text-gray-200">
                    New order <%= activity.orderId %> received
                  </p>
                  <p class="text-xs text-gray-500">
                    <%= new Date(activity.time).toLocaleDateString('en-GB') %>
                  </p>
                </div>
              </div>
              <% } else if (activity.type==='outOfStock' ) { %>
              <div class="flex items-start">
                <div class="flex-shrink-0 mr-3">
                  <div class="h-8 w-8 rounded-full bg-red-100 flex items-center justify-center">
                    <i class="fas fa-box text-red-500 text-sm"></i>
                  </div>
                </div>
                <div>
                  <p class="text-sm font-medium text-gray-200">
                    Product "<%= activity.productName %>" out of stock
                  </p>
                  <p class="text-xs text-gray-500">Needs restocking</p>
                </div>
              </div>
              <% } else if (activity.type==='lowStock' && activity.quantity !==0) { %>
              <div class="flex items-start">
                <div class="flex-shrink-0 mr-3">
                  <div class="h-8 w-8 rounded-full bg-yellow-100 flex items-center justify-center">
                    <i class="fas fa-box text-yellow-500 text-sm"></i>
                  </div>
                </div>
                <div>
                  <p class="text-sm font-medium text-gray-200">
                    Product "<%= activity.productName %>" stock low
                  </p>
                  <p class="text-xs text-gray-500">Only <%= activity.quantity %> left</p>
                </div>
              </div>
              <% } else if (activity.type==='coupon' ) { %>
              <div class="flex items-start">
                <div class="flex-shrink-0 mr-3">
                  <div class="h-8 w-8 rounded-full bg-purple-100 flex items-center justify-center">
                    <i class="fas fa-tag text-purple-500 text-sm"></i>
                  </div>
                </div>
                <div>
                  <p class="text-sm font-medium text-gray-200">
                    New coupon "<%= activity.name %>" created
                  </p>
                  <p class="text-xs text-gray-500">
                    <%= new Date(activity.time).toLocaleDateString('en-GB') %>
                  </p>
                </div>
              </div>
              <% } %>
              <% }) %>
            </div>

            <!-- Pagination -->
            <div class="flex justify-between items-center mt-6">
              <div>
                <p class="text-sm text-gray-100">
                  Showing
                  <span>
                    <%= ((currentPage - 1) * limit) + 1 %>
                  </span>
                  to
                  <span>
                    <%= Math.min(currentPage * limit, totalActivities) %>
                  </span>
                  of
                  <span>
                    <%= totalActivities %>
                  </span>
                  activities
                </p>
              </div>
              <div class="flex space-x-2">
                <% if (currentPage> 1) { %>
                <a
                  href="?page=<%= currentPage - 1 %>&limit=<%= limit %>"
                  class="px-3 py-1 bg-gray-200 rounded-lg hover:bg-gray-300 text-decoration-none page-btn"
                  >Previous</a
                >
                <% } else { %>
                <span class="px-3 py-1 bg-gray-200 rounded-lg opacity-50 cursor-not-allowed"
                  >Previous</span
                >
                <% } %>
                <% if (currentPage < Math.ceil(totalActivities / limit)) { %>
                <a
                  href="?page=<%= currentPage + 1 %>&limit=<%= limit %>"
                  class="px-3 py-1 bg-gray-200 rounded-lg hover:bg-gray-300 text-decoration-none page-btn"
                  >Next</a
                >
                <% } else { %>
                <span class="px-3 py-1 bg-gray-200 rounded-lg opacity-50 cursor-not-allowed"
                  >Next</span
                >
                <% } %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <%- include('../../views/partials/admin/footer') %>
  </body>
</html>
